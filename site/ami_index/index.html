<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="The Digital Services Team at Metropolitan New York Library Council" /><link rel="canonical" href="http://docs.archipelago.nyc/ami_index/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Archipelago Multi-Importer (AMI) - Pala Archipelago Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Archipelago Multi-Importer (AMI)";
        var mkdocs_page_input_path = "ami_index.md";
        var mkdocs_page_url = "/ami_index/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../images/dhammacakka.png" class="logo" alt="Logo"/>
        </a>
        <div class="version">
          {'provider': 'mike', 'default': 'default'}
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">About Archipelago</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ourtake/">Archipelago's Philosophy & Guiding Principles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../strawberryfields/">Strawberryfields Forever</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../devops/">Software Services</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT/">Code of Conduct</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Instructions and Guides</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Archipelago-Deployment</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-readme/">Start</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-osx/">Installing Archipelago Drupal 9 on OSX (macOS)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-ubuntu/">Installing Archipelago Drupal 9 on Ubuntu 18.04 or 20.04</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-democontent/">Adding Demo Archipelago Digital Objects (ADOs) to your Repository</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-upgradeFromD8ToD9/">Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Archipelago-Deployment-Live</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-live-readme/">Start</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-live-gitworkflow/">Github Workflow</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-live-moveToLive/">Moving from archipelago-deployment to archipelago-deployment-live</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archipelago-deployment-live-upgradeFromD8ToD9/">Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Archipelago 101</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Digital Objects and Collections, Metadata, General Workflows</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../firstobject/">Ingesting Your First Object</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="#">Webforms in Archipelago</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../webforms/">Webforms</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../webformsasinput/">How to Create a Webform as an Input Method for Archipelago Digital Objects (ADO)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../modifyingfileextensionsinwebform/">Customizing Webforms (Modifying allowable file extensions)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../customwebformelements/">Archipelago Custom Webform Elements</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="#">Twig Templates and Archipelago</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../metadatatwigs/">Twig Templates and Archipelago</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../workingtwigs/">Working With Twig in Archipelago (getting started with custom Twig templates)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="#">Archipelago Multi-Importer (AMI)</a>
    <ul class="current">
                <li class="toctree-l4 current"><a class="reference internal current" href="./">Archipelago Multi-Importer (AMI)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="#">AMI Instructions and Guides</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../annotations/">Annotations</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Site Administration & Configuration</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../strawberryfield-formatters/">Strawberryfield Formatters</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../createdisplaymodes/">Creating Display Modes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../archifilepersistencestrategy/">Archipelago's File Persistence Strategy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../sslsetup/">How to Set Up SSL for Docker/Archipelago</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../xdebug/">Debugging PHP in Archipelago</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">General Q&A</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../generalqa_index/">General Q&A</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../generalqa_twig_modules_configuration/">Twig Modules Configuration</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../generalqa_smtp_configuration/">SMTP Configuration</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../generalqa_minio_logging/">Min.io Logging</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Additional Information</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../presentations_docs/">Archipelago Presentations and Documents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inthewild/">Archipelagos in the Wild</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../giveortake/">Contribution Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../about/">About This Documentation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../acknowledgments/">Care & Coding + Fixing / Acknowledgments / License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Pala Archipelago Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Instructions and Guides &raquo;</li>
          <li>Archipelago 101 &raquo;</li>
          <li>Digital Objects and Collections, Metadata, General Workflows &raquo;</li>
          <li>Archipelago Multi-Importer (AMI) &raquo;</li>
      <li>Archipelago Multi-Importer (AMI)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="archipelago-multi-importer-ami">Archipelago Multi-Importer (AMI)</h1>
<p><a href="https://github.com/esmero/ami">Archipelago Multi-Importer (AMI)</a> is a module for batch/bulk/mass ingests of Archipelago digital objects (ADOs) and collections. AMI also enables you to perform batch administrative actions, such as updating, patching/revising, or deleting digital objects and collections. AMI's Solr Importer plugin can be used to create AMI ingests and migrating content from existing Solr-sourcable digital repositories (such as Islandora 7).</p>
<h2 id="getting-started-with-ami">Getting started with AMI</h2>
<p>You can access AMI through the <code>AMI Sets</code> tab on the main Content page found at <code>/admin/content</code> or directly at <code>/amiset/list</code>.</p>
<p><img alt="AMI Sets List" src="../images/ami/AMIsetsList.jpg" /></p>
<h2 id="ami-overview-and-pre-release-notes-ami-040-archipelago-100">AMI Overview and Pre-Release Notes - AMI 0.4.0 (Archipelago - 1.0.0)</h2>
<p><em>From the desk of <a href="https://github.com/DiegoPino">Diego Pino</a></em></p>
<p>AMI provides Tabulated data ingest for ADOs with customizable input plugins. Each Spreadsheet (or Google Spreadsheet) goes through a Configuration Multi Step setup and generates at the end an AMI Set. AMI Sets then can be enqueued or directly ingested, its generated Objects purged and reingested again, its source data (generated and enriched with UUIDS) CSV replaced, improved and uploaded again and ingested.</p>
<details class="info">
<summary>Click to read the full AMI 0.4.0 (Archipelago - 1.0.0) Pre-Release Notes.</summary>
<h4 id="setup-steps">Setup Steps</h4>
<p>AMI has Ingest, Update and Patch capabilities. AMI has a plugin system to fetch data. The data can come from multiple sources and right now CSV/EXCEL or Google Spreadsheets are the ones enabled. It does parent/children validation, makes sure that parents are ingested first, cleans broken relationships, allows arbitrary multi relations to be generated in a single ROW (ismemberof, partOf, etc)  pointing to other rows or existing ADOs (via UUIDs) and can process rows directly as JSON or preprocessed via a Metadata Display entity (twig template) capable of producing JSON output. These templates can be configured by “type”, Articles v/s 3DModel can have different ones. Even which columns contain Files can be configured at that level.</p>
<h4 id="ami-set-entity">AMI Set Entity</h4>
<p>Ami Sets are special custom entities that hold an Ingest Strategy generated via the previous Setup steps (as JSON with all it's settings), a CSV with data imported from the original source (with UUIDs prepopulated if they were not provided by the user). These AMI sets are simpler and faster than “batch sets” because they do not have a single entry per Object to be ingested. All data lives in a CSV. This means the CSV of an AMI set can be corrected and reuploaded. Users can then Process a Set either putting the to be ingested ADOs in the queue and let Hydroponics Service do the rest or directly via Batch on the UI. ADOs generated by a set can also be purged from there. These sets can also be created manually if needed of any of the chosen settings modified anytime. Which AMI set generated the Ingest is also tracked in a newly created ADO’s JSON and any other extra data (or fixed data e.g common Rights statements, or LoD) can be provided by a Twig Template. Ingest is amazingly fast. We monitored Ingest with Remote URL(islandora Datastreams) files of 15Mbytes average at a speed of 2 seconds per Object (including all post processing) continuously for a set of 100+.</p>
<h4 id="search-and-replace">Search and Replace</h4>
<p>This module also provides a simple search/replace text VBO action (handles JSON as text) and a full blown JSONPATCH VBO action to batch modify ADOs. The last one is extremely powerful permitting multiple operations at the same time with tests. E.g replace a certain value, add another value, remove another value only if a certain test (e.g “type”:”Article” and “date_of_digital”: “2020-09-09”) matches. If any tests fail the whole operation will be canceled for that ADO. An incomplete “Webform” VBO action is present but not fully functional yet. This one allows you to choose a Webform, a certain element inside that Webform and then find and replace using the same Interface you would see while editing/adding a new ADO via the web form workflow.</p>
</details>
<h2 id="getting-started-with-ami_1">Getting started with AMI</h2>
<p>You can access AMI through the <code>AMI Sets</code> tab on the main Content page found at <code>/admin/content</code> or directly at <code>/amiset/list</code>.</p>
<p><img alt="AMI Sets List" src="../images/ami/AMIsetsList.jpg" /></p>
<h2 id="google-sheets-api-congifuration">Google Sheets API Congifuration</h2>
<p>If you plan on using the Google Sheets Importer option, you will need to <a href="../googleapi/">Configure the Google Sheets API</a>.</p>
<h3 id="example-spreadsheetcsv">Example Spreadsheet/CSV</h3>
<p>This spreadsheet can be used to import a small set of Digital Objects using the same assets part of the <a href="democontent.md">Two-Step Demo content ingest guide</a> (these objects can also be found in the <a href="https://github.com/esmero/archipelago-deployment">Archipelago Deployment repository</a>).</p>
<ul>
<li><a href="https://docs.google.com/spreadsheets/d/10IAgDZ1_fGVd_2g1GyUYs0SrnkAfvVtTwukEaIEny5Y/edit?usp=sharing">https://docs.google.com/spreadsheets/d/10IAgDZ1_fGVd_2g1GyUYs0SrnkAfvVtTwukEaIEny5Y/edit?usp=sharing</a></li>
<li>To use this spreadsheet, you can either download as a CSV file to use with the Spreadsheet Importer, or make a copy of this using your <a href="../googleapi/">configured Google Sheets API account</a>.</li>
</ul>
<h3 id="example-json-template">Example JSON template</h3>
<p>This JSON template can be used during the Data Transformation (step 3) of your AMI Import. This particular template corresponds with the metadata elements found in the Default Descriptive Metadata and Default Digital Object Collection webforms shipped with Archipelago 1.0.0.</p>
<details class="info">
<summary>Click to view the example 1.0.0 AMI JSON template</summary>
<p>To use this template, copy and paste the JSON below directly into a new Metadata Display, found here for a local <code>http://localhost:8001/metadatadisplay/list</code> or <code>http://yoursite.org/metadatadisplay/list</code>. Select <code>JSON</code> as the 'Primary mime type this Twig Template entity will generate as output' for this new Metadata Display.</p>
<div class="highlight"><pre><span></span><code>  {
      &quot;type&quot;: {{ data.type|json_encode|raw }},
      &quot;label&quot;: {{ data.label|json_encode|raw }},
      &quot;issue_number&quot;: {{ data.issue_number|json_encode|raw }},
      &quot;interviewee&quot;: {{ data.interviewee|json_encode|raw }},
      &quot;interviewer&quot;: {{ data.interviewer|json_encode|raw }},
      &quot;duration&quot;: {{ data.duration|json_encode|raw }},
      &quot;website_url&quot;: {{ data.website_url|json_encode|raw }},
      &quot;description&quot;: {{ data.description|json_encode|raw }},
      &quot;date_created&quot;: {{ data.date_created|json_encode|raw }},
      &quot;creator&quot;: {{ data.creator|json_encode|raw }},
      &quot;creator_lod&quot;: {{ data.creator_lod|json_encode|raw }},
      &quot;publisher&quot;: {{ data.publisher|json_encode|raw }},
      &quot;language&quot;: {{ data.language|json_encode|raw }},
      &quot;ismemberof&quot;: [],
      &quot;owner&quot;: {{ data.owner|json_encode|raw }},
      &quot;local_identifier&quot;: {{ data.local_identifier|json_encode|raw }},
      &quot;date_published&quot;: {{ data.date_published|json_encode|raw }},
      &quot;rights_statements&quot;: {{ data.rights_statements|json_encode|raw }},
      &quot;rights&quot;: {{ data.rights|json_encode|raw }},
      &quot;subject_loc&quot;: {{ data.subject_loc|json_encode|raw }},
      &quot;subject_lcnaf_personal_names&quot;: {{ data.subject_lcnaf_personal_names|json_encode|raw }},
      &quot;subject_lcnaf_corporate_names&quot;: {{ data.subject_lcnaf_corporate_names|json_encode|raw }},
      &quot;subject_lcnaf_geographic_names&quot;: {{ data.subject_lcnaf_geographic_names|json_encode|raw }},
      &quot;subject_lcgft_terms&quot;: {{ data.subject_lcgft_terms|json_encode|raw }},
      &quot;subject_wikidata&quot;: {{ data.subject_wikidata|json_encode|raw }},
      &quot;edm_agent&quot;: {{ data.edm_agent|json_encode|raw }},
      &quot;term_aat_getty&quot;: {{ data.term_aat_getty|json_encode|raw }},
      &quot;geographic_location&quot;: {{ data.geographic_location|json_encode|raw }},
      &quot;subjects_local_personal_names&quot;: {{ data.subjects_local_personal_names|json_encode|raw }},
      &quot;subjects_local&quot;: {{ data.subjects_locals|json_encode|raw }},
      &quot;audios&quot;: [],
      &quot;images&quot;: [],
      &quot;models&quot;: [],
      &quot;videos&quot;: [],
      &quot;documents&quot;: [],
      &quot;as:generator&quot;: {
          &quot;type&quot;: &quot;Create&quot;,
          &quot;actor&quot;: {
              &quot;url&quot;: {{ setURL|json_encode|raw }},
              &quot;name&quot;: &quot;ami&quot;,
              &quot;type&quot;: &quot;Service&quot;
          },
          &quot;endTime&quot;: &quot;{{&quot;now&quot;|date(&quot;c&quot;)}}&quot;,
          &quot;summary&quot;: &quot;Generator&quot;,
          &quot;@context&quot;: &quot;https:\/\/www.w3.org\/ns\/activitystreams&quot;
      },
      &quot;upload_associated_warcs&quot;: []
  }
</code></pre></div>
</details>
<hr />
<p>Thank you for reading! Please contact us on our <a href="https://groups.google.com/forum/#!forum/archipelago-commons">Archipelago Commons Google Group</a> with any questions or feedback.</p>
<p>Return to the <a href="..">Archipelago Documentation main page</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../workingtwigs/" class="btn btn-neutral float-left" title="Working With Twig in Archipelago (getting started with custom Twig templates)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ami_spreadsheet_overview/" class="btn btn-neutral float-right" title="Spreadsheet Formatting Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../workingtwigs/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ami_spreadsheet_overview/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
      <script src="../js/version-select.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
